<div class="message-contacts">
  <ul class="conversations">

    <a href="{%url 'chat'%}">
      <li class="contact">
        
          <div class="wrap">
              <span class="contact-status online"></span>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat-dots-fill" viewBox="0 0 16 16">
                <path d="M16 8c0 3.866-3.582 7-8 7a9 9 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7M5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0m4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0m3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2"/>
              </svg>
              <span class="unread-messages">3</span>
              <div class="meta">
                  <p class="name">Chat</p>
                  <p class="preview"></p>
              </div>
          </div>
      </li>
    </a>

      {% for room in chat_rooms %}
      {%for f in room.members.all%}
      {% if f != user %}
      <a href="{%url 'open_chat' room.id%}">
      <li class="contact messenger-user-active">
        
          <div class="wrap">
              <span class="contact-status busy"></span>
              <img src="{{f.avatar.url}}" alt="Conversation user" />
              <div class="meta">
                  <p class="name">{{f.name}}</p>
                  <p class="preview"></p>
              </div>
          </div>
       
      </li>
    </a>
      {%endif%}
      {%endfor%}
      {%endfor%}

  </ul>
</div>





  <script>
      // Khi một mục menu được nhấp, hãy thêm class 'active' vào nó và loại bỏ từ các mục khác
      document.addEventListener('DOMContentLoaded', function() {
        var menuItems = document.querySelectorAll('.menu-item');
    
        menuItems.forEach(function(item) {
          item.addEventListener('click', function() {
            // Xóa class 'active' khỏi tất cả các mục
            menuItems.forEach(function(item) {
              item.classList.remove('active');
            });
    
            // Thêm class 'active' vào mục được nhấp
            this.classList.add('active');
          });
        });
      });


      document.querySelector('.search input').addEventListener('input', function() {
    // Lấy giá trị nhập vào
    var searchTerm = this.value.trim().toLowerCase(); // Chuyển đổi giá trị nhập vào thành chữ thường

    // Lặp qua danh sách tên người dùng và ẩn/hiển thị tùy thuộc vào kết quả tìm kiếm
    var menuItems = document.querySelectorAll('.menu .menu-item');
    menuItems.forEach(function(item) {
      var username = item.textContent.trim().toLowerCase(); // Lấy tên người dùng và chuyển thành chữ thường
      if (username.includes(searchTerm)) {
        item.style.display = 'block'; // Hiển thị menu-item nếu tên người dùng chứa từ khóa tìm kiếm
      } else {
        item.style.display = 'none'; // Ẩn menu-item nếu tên người dùng không chứa từ khóa tìm kiếm
      }
    });
  });
    </script>
  